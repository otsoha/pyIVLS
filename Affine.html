<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Python: class Affine</title>
</head><body>
<p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="Affine">class <strong>Affine</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">Affine(settings:&nbsp;Optional[Dict[str,&nbsp;Any]]&nbsp;=&nbsp;None)&nbsp;-&amp;gt;&nbsp;None<br>
&nbsp;<br>
Calculates&nbsp;the&nbsp;affine&nbsp;transformation&nbsp;between&nbsp;two&nbsp;images&nbsp;using&nbsp;SIFT&nbsp;keypoints&nbsp;and&nbsp;descriptors.<br>
Assumes&nbsp;the&nbsp;images&nbsp;are&nbsp;grayscale&nbsp;or&nbsp;RGB&nbsp;(converted&nbsp;internally).<br>
Usage:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Create&nbsp;an&nbsp;Affine&nbsp;object.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Load&nbsp;the&nbsp;mask&nbsp;image&nbsp;using&nbsp;<a href="#Affine-update_internal_mask">update_internal_mask</a>().<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Call&nbsp;<a href="#Affine-try_match">try_match</a>()&nbsp;with&nbsp;the&nbsp;input&nbsp;image.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;If&nbsp;the&nbsp;transformation&nbsp;is&nbsp;found,&nbsp;access&nbsp;the&nbsp;transformation&nbsp;matrix&nbsp;using&nbsp;the&nbsp;A&nbsp;attribute.<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Use&nbsp;<a href="#Affine-coords">coords</a>()&nbsp;to&nbsp;get&nbsp;the&nbsp;transformed&nbsp;coordinates&nbsp;of&nbsp;a&nbsp;point.<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Methods defined here:<br>
<dl><dt><a name="Affine-__init__"><strong>__init__</strong></a>(self, settings: Optional[Dict[str, Any]] = None) -&gt; None</dt><dd><span class="code">Initializes&nbsp;an&nbsp;instance&nbsp;of&nbsp;Affine.&nbsp;Optionally&nbsp;takes&nbsp;a&nbsp;settings&nbsp;dict.<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;settings&nbsp;(dict,&nbsp;optional):&nbsp;Settings&nbsp;for&nbsp;algorithm&nbsp;and&nbsp;preprocessing.</span></dd></dl>

<dl><dt><a name="Affine-center_on_component"><strong>center_on_component</strong></a>(self, x: int, y: int) -&gt; Tuple[int, int]</dt><dd><span class="code">Finds&nbsp;the&nbsp;centroid&nbsp;of&nbsp;a&nbsp;connected&nbsp;component&nbsp;in&nbsp;the&nbsp;mask&nbsp;image&nbsp;based&nbsp;on&nbsp;the&nbsp;color&nbsp;at&nbsp;(x,&nbsp;y).<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;(int):&nbsp;X&nbsp;coordinate&nbsp;in&nbsp;the&nbsp;mask&nbsp;image.<br>
&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;(int):&nbsp;Y&nbsp;coordinate&nbsp;in&nbsp;the&nbsp;mask&nbsp;image.<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;Tuple[int,&nbsp;int]:&nbsp;Centered&nbsp;coordinates&nbsp;(x,&nbsp;y)&nbsp;of&nbsp;the&nbsp;selected&nbsp;component.<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;AffineError:&nbsp;If&nbsp;no&nbsp;internal&nbsp;mask&nbsp;is&nbsp;loaded.</span></dd></dl>

<dl><dt><a name="Affine-coords"><strong>coords</strong></a>(self, point: Tuple[float, float]) -&gt; Tuple[float, float]</dt><dd><span class="code">Transforms&nbsp;a&nbsp;point&nbsp;from&nbsp;the&nbsp;mask&nbsp;to&nbsp;the&nbsp;corresponding&nbsp;point&nbsp;on&nbsp;the&nbsp;image&nbsp;using&nbsp;the&nbsp;affine&nbsp;transformation.<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;point&nbsp;(Tuple[float,&nbsp;float]):&nbsp;(x,&nbsp;y)&nbsp;coordinates&nbsp;of&nbsp;the&nbsp;point&nbsp;on&nbsp;the&nbsp;mask.<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;Tuple[float,&nbsp;float]:&nbsp;(x,&nbsp;y)&nbsp;coordinates&nbsp;of&nbsp;the&nbsp;transformed&nbsp;point&nbsp;on&nbsp;the&nbsp;image.<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;AffineError:&nbsp;If&nbsp;no&nbsp;affine&nbsp;transformation&nbsp;has&nbsp;been&nbsp;found.</span></dd></dl>

<dl><dt><a name="Affine-get_transformation"><strong>get_transformation</strong></a>(
    self,
    src: numpy.ndarray,
    dst: numpy.ndarray,
    residual_threshold: int = 10
) -&gt; Tuple[Any, numpy.ndarray]</dt><dd><span class="code">Estimate&nbsp;the&nbsp;affine&nbsp;transformation&nbsp;using&nbsp;RANSAC.<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;src&nbsp;(np.ndarray):&nbsp;Source&nbsp;points&nbsp;(N,&nbsp;2).<br>
&nbsp;&nbsp;&nbsp;&nbsp;dst&nbsp;(np.ndarray):&nbsp;Destination&nbsp;points&nbsp;(N,&nbsp;2).<br>
&nbsp;&nbsp;&nbsp;&nbsp;residual_threshold&nbsp;(int):&nbsp;RANSAC&nbsp;residual&nbsp;threshold.<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;Tuple[SimilarityTransform,&nbsp;np.ndarray]:&nbsp;Model&nbsp;and&nbsp;inlier&nbsp;mask.<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;AffineError:&nbsp;If&nbsp;RANSAC&nbsp;fails&nbsp;to&nbsp;find&nbsp;a&nbsp;transform.</span></dd></dl>

<dl><dt><a name="Affine-manual_transform"><strong>manual_transform</strong></a>(
    self,
    src: numpy.ndarray,
    dst: numpy.ndarray,
    img: numpy.ndarray,
    mask: numpy.ndarray
) -&gt; None</dt><dd><span class="code">Apply&nbsp;an&nbsp;affine&nbsp;transform&nbsp;manually,&nbsp;given&nbsp;points&nbsp;from&nbsp;the&nbsp;mask&nbsp;and&nbsp;image&nbsp;respectively.<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;src&nbsp;(np.ndarray):&nbsp;Points&nbsp;from&nbsp;the&nbsp;mask&nbsp;(N,&nbsp;2).<br>
&nbsp;&nbsp;&nbsp;&nbsp;dst&nbsp;(np.ndarray):&nbsp;Corresponding&nbsp;points&nbsp;from&nbsp;the&nbsp;image&nbsp;(N,&nbsp;2).<br>
&nbsp;&nbsp;&nbsp;&nbsp;img&nbsp;(np.ndarray):&nbsp;Image&nbsp;array.<br>
&nbsp;&nbsp;&nbsp;&nbsp;mask&nbsp;(np.ndarray):&nbsp;Mask&nbsp;array.<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;AffineError:&nbsp;If&nbsp;transformation&nbsp;fails.</span></dd></dl>

<dl><dt><a name="Affine-try_match"><strong>try_match</strong></a>(self, img: numpy.ndarray) -&gt; bool</dt><dd><span class="code">Attempts&nbsp;to&nbsp;find&nbsp;the&nbsp;affine&nbsp;transformation&nbsp;between&nbsp;the&nbsp;input&nbsp;image&nbsp;and<br>
mask&nbsp;using&nbsp;SIFT&nbsp;keypoints&nbsp;and&nbsp;descriptors.<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;img&nbsp;(np.ndarray):&nbsp;Input&nbsp;image&nbsp;to&nbsp;match&nbsp;with&nbsp;the&nbsp;mask.<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;bool:&nbsp;True&nbsp;if&nbsp;transformation&nbsp;is&nbsp;found,&nbsp;raises&nbsp;AffineError&nbsp;otherwise.<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;AffineError:&nbsp;If&nbsp;no&nbsp;image/mask&nbsp;is&nbsp;loaded,&nbsp;or&nbsp;not&nbsp;enough&nbsp;matches,&nbsp;or&nbsp;SIFT&nbsp;fails.</span></dd></dl>

<dl><dt><a name="Affine-update_internal_mask"><strong>update_internal_mask</strong></a>(self, path: str) -&gt; numpy.ndarray</dt><dd><span class="code">Loads&nbsp;and&nbsp;sets&nbsp;the&nbsp;internal&nbsp;mask&nbsp;from&nbsp;a&nbsp;file&nbsp;path&nbsp;(image&nbsp;or&nbsp;GDS).<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;mask&nbsp;image&nbsp;or&nbsp;GDS&nbsp;file.<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;np.ndarray:&nbsp;Loaded&nbsp;mask&nbsp;image.</span></dd></dl>

<dl><dt><a name="Affine-update_settings"><strong>update_settings</strong></a>(self, settings: Dict[str, Any]) -&gt; None</dt><dd><span class="code">Update&nbsp;algorithmic&nbsp;and&nbsp;preprocessing&nbsp;settings&nbsp;from&nbsp;a&nbsp;dictionary.<br>
Accepts&nbsp;keys:&nbsp;ratiotest,&nbsp;residualthreshold,&nbsp;crosscheck,&nbsp;and&nbsp;preprocessing&nbsp;keys.<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;settings&nbsp;(dict):&nbsp;Settings&nbsp;dictionary.</span></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__annotations__</strong> = {'A': typing.Optional[numpy.ndarray], 'MIN_MATCHES': &lt;class 'int'&gt;, 'cross_check': &lt;class 'bool'&gt;, 'internal_img': typing.Optional[numpy.ndarray], 'internal_mask': typing.Optional[numpy.ndarray], 'io': &lt;class 'Affine_skimage.Affine_IO'&gt;, 'path': &lt;class 'str'&gt;, 'preprocessor': &lt;class 'Affine_skimage.Preprocessor'&gt;, 'ratio_test': &lt;class 'float'&gt;, 'residual_threshold': &lt;class 'int'&gt;, ...}</dl>

</td></tr></table>
</body></html>